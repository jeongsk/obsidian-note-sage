# Note Sage - 사용자 매뉴얼

## 목차

- [소개](#소개)
- [요구 사항](#요구-사항)
- [설치](#설치)
- [초기 설정](#초기-설정)
- [플러그인 사용법](#플러그인-사용법)
  - [채팅 인터페이스](#채팅-인터페이스)
  - [메시지 보내기](#메시지-보내기)
  - [파일 컨텍스트](#파일-컨텍스트)
  - [빠른 액션](#빠른-액션)
  - [세션 관리](#세션-관리)
- [설정](#설정)
- [MCP 서버](#mcp-서버)
- [사용 가능한 모델](#사용-가능한-모델)
- [기능](#기능)
- [문제 해결](#문제-해결)
- [자주 묻는 질문](#자주-묻는-질문)

---

## 소개

**Note Sage**는 Claude AI를 Obsidian 작업 공간에 직접 통합하는 플러그인입니다. Claude Agent SDK를 사용하여 Obsidian의 오른쪽 사이드바에 AI 채팅 인터페이스를 제공하며, 볼트에서 작업하면서 Claude와 상호작용할 수 있습니다.

### 주요 기능

- Obsidian 내에서 Claude AI와 직접 대화
- 현재 노트의 컨텍스트를 대화에 포함
- 세션 관리를 통한 대화 연속성 유지
- AI 응답의 실시간 스트리밍
- 다양한 Claude 모델 지원
- AI 에이전트를 통한 파일 읽기 및 명령 실행
- **MCP 서버 통합**으로 외부 도구 연결
- **11개 언어 지원** 및 RTL 지원 (아랍어)
- **빠른 액션 커스터마이징**으로 자주 사용하는 작업 빠르게 실행

---

## 요구 사항

- **Obsidian**: 버전 0.15.0 이상
- **플랫폼**: 데스크톱 전용 (Windows, macOS, Linux)
- **Anthropic API 키**: Claude AI 접근에 필요

---

## 설치

### 커뮤니티 플러그인에서 설치 (권장)

1. Obsidian 설정 열기
2. **커뮤니티 플러그인**으로 이동
3. **찾아보기**를 클릭하고 "Note Sage" 검색
4. **설치** 클릭
5. 플러그인 활성화

### 수동 설치

1. GitHub 저장소에서 최신 릴리스 다운로드
2. 파일을 볼트의 `.obsidian/plugins/obsidian-note-sage/` 디렉토리에 압축 해제
3. Obsidian 다시 로드
4. **설정** → **커뮤니티 플러그인**에서 "Note Sage" 활성화

---

## 초기 설정

### API 키 발급

1. [console.anthropic.com](https://console.anthropic.com) 방문
2. 계정 생성 또는 로그인
3. **API Keys**로 이동
4. 새 API 키 생성
5. 키 복사 (`sk-ant-...`로 시작)

### 플러그인 설정

1. Obsidian 설정 열기
2. 왼쪽 사이드바에서 **Note Sage** 선택
3. **Anthropic API Key** 필드에 API 키 붙여넣기
4. 선호하는 Claude 모델 선택
5. 인터페이스 언어 선택 (11개 언어 지원)
6. 설정 닫기

---

## 플러그인 사용법

### 채팅 인터페이스

플러그인을 활성화하면 오른쪽 사이드바에 AI 채팅 패널이 자동으로 열립니다. 인터페이스 구성:

- **헤더**: "AI Agent" 제목과 컨트롤 버튼
- **메시지 영역**: 대화 기록 표시
- **입력 영역**: 메시지 입력 공간

#### 헤더 버튼

| 버튼 | 아이콘 | 설명 |
|------|--------|------|
| Examples | 텍스트 | 예제 메시지 및 상호작용 표시 |
| Settings | ⚙️ | 플러그인 설정 열기 |
| New Chat | + | 새 대화 시작 |

### 메시지 보내기

1. 하단 텍스트 영역에 메시지 입력
2. **Enter**를 눌러 전송 (또는 전송 버튼 클릭)
3. **Shift + Enter**로 줄 바꿈 (전송하지 않음)

AI가 메시지를 처리하고 실시간으로 응답을 스트리밍합니다.

#### 응답 취소

AI가 처리 중일 때:
- 전송 버튼이 정지 아이콘(■)으로 변경됨
- 정지 버튼을 클릭하여 현재 작업 취소
- 로딩 스피너가 활성 처리를 표시

### 파일 컨텍스트

플러그인은 현재 활성 노트의 컨텍스트를 메시지에 포함할 수 있습니다.

#### 파일 컨텍스트 전환

1. 입력 필드 위의 **Current page** 토글 찾기
2. 클릭하여 활성화/비활성화 (활성 시 강조 표시)
3. 활성화되면 파일 경로가 메시지에 자동으로 포함됨

현재 노트에 대해 질문하거나 수정을 요청할 때 유용합니다.

### 빠른 액션

채팅 입력창 위의 빠른 액션 버튼으로 자주 사용하는 작업을 빠르게 실행할 수 있습니다:

| 액션 | 설명 |
|------|------|
| **요약** | 현재 문서를 간결하게 요약 |
| **개선** | 문체 개선 및 오류 수정 |
| **분석** | 문서 분석 및 인사이트 제공 |
| **번역** | 언어 간 번역 |

#### 빠른 액션 커스터마이징

1. **설정 > Note Sage > 빠른 액션**으로 이동
2. 개별 버튼 활성화/비활성화
3. 각 액션의 커스텀 프롬프트 설정
4. 기본 프롬프트를 사용하려면 비워두기

### 세션 관리

플러그인은 연속성을 위해 대화 세션을 유지합니다:

- **세션 지속**: 패널을 닫아도 대화가 계속됨
- **컨텍스트 유지**: AI가 세션의 이전 메시지를 기억
- **새 세션**: **+** 버튼을 클릭하여 새 대화 시작

---

## 설정

**Obsidian 설정** → **Note Sage**를 통해 접근하거나 채팅 헤더의 ⚙️ 버튼을 클릭하세요.

### 기본 설정

| 설정 | 설명 |
|------|------|
| **모델** | 사용할 Claude 모델 선택 |
| **언어** | 인터페이스 언어 (자동 또는 11개 언어 중 선택) |

### 파일 컨텍스트

| 설정 | 설명 |
|------|------|
| **파일 내용 포함** | 현재 파일 내용을 컨텍스트에 포함 |
| **선택된 텍스트 우선** | 파일 전체 대신 선택 영역만 포함 |
| **최대 내용 길이** | 파일에서 포함할 최대 문자 수 |

### 빠른 액션

| 설정 | 설명 |
|------|------|
| **버튼 활성화/비활성화** | 개별 빠른 액션 버튼 토글 |
| **커스텀 프롬프트** | 각 액션의 커스텀 프롬프트 설정 |

### 고급 설정

| 설정 | 설명 |
|------|------|
| **Anthropic API Key** | console.anthropic.com에서 발급받은 API 키 |
| **Claude CLI 경로** | claude 실행 파일 경로 (자동 탐지) |
| **사용자 지정 시스템 프롬프트** | Claude에 대한 사용자 지정 지시사항 |
| **디버그 모드** | 브라우저 콘솔에 상세 로깅 활성화 |

---

## MCP 서버

MCP (Model Context Protocol) 서버를 연결하여 AI 에이전트의 기능을 확장할 수 있습니다.

### MCP 서버 추가

1. **설정 > Note Sage > MCP 서버**로 이동
2. **서버 추가** 클릭
3. 서버 타입 선택:
   - **stdio**: 명령줄 기반 서버
   - **SSE**: Server-Sent Events 기반 서버
   - **HTTP**: HTTP 기반 서버
4. 서버 설정 구성 (명령어, URL 등)
5. 서버 활성화

### MCP 도구 패널

MCP 서버가 연결되면:
- 연결된 서버의 사용 가능한 도구 확인
- 도구 설명 및 매개변수 보기
- 서버 연결 상태 모니터링

---

## 사용 가능한 모델

| 모델 | 설명 | 권장 용도 |
|------|------|----------|
| **Claude Opus 4.5** | 가장 강력한 모델 | 복잡한 작업, 상세 분석 |
| **Claude Sonnet 4** | 균형 잡힌 성능 | 일반 사용 (기본값) |
| **Claude Sonnet 4.5** | 최신 균형 모델 | 최신 기능과 좋은 성능 |
| **Claude Haiku 4.5** | 가장 빠른 모델 | 빠른 응답, 간단한 작업 |

---

## 기능

### AI 에이전트 기능

Claude AI 에이전트가 할 수 있는 것:

- **파일 읽기**: 볼트의 파일 접근 및 분석
- **명령 실행**: 터미널 명령 실행 (적절한 권한 하에)
- **질문 답변**: 정보 및 설명 제공
- **글쓰기 지원**: 노트 작성, 요약, 콘텐츠 생성 지원
- **코드 지원**: 노트의 코드 관련 작업 도움

### 실시간 스트리밍

응답은 실시간으로 스트리밍되므로 AI의 출력이 생성되는 대로 볼 수 있습니다. 완전한 응답을 기다리는 것보다 더 인터랙티브한 경험을 제공합니다.

### 도구 사용 표시

AI가 도구(파일 읽기나 명령 실행 등)를 사용할 때 플러그인이 표시하는 것:
- 도구 이름 및 매개변수
- 도구 실행 결과
- 발생한 오류

---

## 문제 해결

### 일반적인 문제

#### "API Key not configured"
- 플러그인 설정에서 API 키를 입력했는지 확인
- 키가 유효하고 만료되지 않았는지 확인
- 키가 `sk-ant-`로 시작하는지 확인

#### AI 응답 없음
- 인터넷 연결 확인
- API 키가 유효한지 확인
- 브라우저 콘솔(Ctrl+Shift+I / Cmd+Opt+I)을 열어 오류 확인

#### 느린 응답
- 더 빠른 모델(Haiku)로 전환 시도
- 인터넷 연결 속도 확인
- 큰 파일 컨텍스트가 처리 시간을 증가시킬 수 있음

### 디버그 모드

문제 해결을 위한 디버그 모드 활성화:

1. 플러그인 설정으로 이동
2. **Debug mode** 활성화
3. 개발자 콘솔 열기:
   - **Windows/Linux**: `Ctrl + Shift + I`
   - **macOS**: `Cmd + Option + I`
4. `=== DEBUG CONTEXT ===`로 시작하는 로그 확인

디버그 모드가 기록하는 것:
- API 키 설정 상태
- 선택된 모델
- 메시지 컨텍스트 (원본 및 파일 컨텍스트 포함)
- 세션 ID
- 스트리밍 메시지

---

## 자주 묻는 질문

### 데이터가 안전한가요?

- 메시지는 Anthropic API로 직접 전송됨
- API 키는 Obsidian의 플러그인 데이터에 로컬로 저장됨
- 제3자 서버에 데이터가 저장되지 않음

### 오프라인에서 사용할 수 있나요?

아니요, Claude API와 통신하려면 인터넷 연결이 필요합니다.

### 모델 간의 차이점은?

- **Opus**: 가장 지능적, 복잡한 추론에 최적
- **Sonnet**: 속도와 기능의 좋은 균형 (권장)
- **Haiku**: 가장 빠름, 간단한 작업에 최적

### 대화를 초기화하려면?

헤더의 **+** (새 채팅) 버튼을 클릭하여 새 대화를 시작하세요.

### AI가 파일을 수정할 수 있나요?

네, 적절한 권한으로 에이전트를 사용할 때 볼트의 파일을 읽고 수정할 수 있습니다. 변경 사항을 커밋하기 전에 항상 검토하세요.

### 사용 가능한 키보드 단축키는?

| 단축키 | 동작 |
|--------|------|
| Enter | 메시지 전송 |
| Shift + Enter | 메시지에서 줄 바꿈 |

---

## 지원

- **이슈**: [GitHub Issues](https://github.com/jeongsk/obsidian-note-sage/issues)에서 문제 보고
- **문서**: 개발자 정보는 프로젝트의 CLAUDE.md 확인

---

*버전 0.6.0 | Note Sage*
