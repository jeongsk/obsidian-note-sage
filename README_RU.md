# Note Sage

[한국어](README.md) | [English](README_EN.md) | [简体中文](README_ZH.md) | [日本語](README_JA.md) | [Deutsch](README_DE.md) | [Français](README_FR.md) | [Español](README_ES.md) | [Português](README_PT.md) | [Русский](README_RU.md) | [हिन्दी](README_HI.md) | [العربية](README_AR.md)

https://github.com/user-attachments/assets/3b251604-cf52-4f38-8c9d-fba67e280b64

Добавьте AI-агентов прямо в ваше хранилище Obsidian. Этот плагин бесшовно интегрирует Claude Code CLI с Obsidian — позволяя вам общаться с AI, редактировать файлы и управлять базой знаний, не покидая рабочее пространство.

## Зачем?

Работа с AI не должна прерывать ваш рабочий процесс или терять контекст хранилища.

Этот плагин держит Claude в курсе вашей среды Obsidian, позволяя вам оставаться в рабочем пространстве вместо переключения на терминал. Он также предоставляет функции для более эффективного управления контекстом.

## Возможности

- **Прямая интеграция AI**: Общайтесь с Claude Code прямо в интерфейсе Obsidian
- **Подход файл-первым**: AI-агенты могут читать, редактировать и создавать файлы в вашем хранилище
- **Осведомленность о контексте**: Автоматически включает релевантный контекст хранилища в разговоры
- **Совместная работа в реальном времени**: Смотрите правки AI в реальном времени в интерфейсе Obsidian
- **Быстрые действия**: Быстро выполняйте типичные задачи с предустановленными промптами (Резюме, Улучшение, Анализ, Перевод)
- **Интеграция MCP-сервера**: Подключайте внешние инструменты и ресурсы к AI-агенту
- **Многоязычный интерфейс**: Поддержка 11 языков (русский, английский, корейский, японский, китайский, немецкий, французский, испанский, португальский, хинди, арабский)
- **Управление сессиями**: Сохраняйте непрерывность разговоров и сохраняйте их

## Установка

### Предварительные требования

- **Аккаунт Anthropic** — необходим для доступа к Claude API ([console.anthropic.com](https://console.anthropic.com))
- **Claude Code CLI** — получите на [Anthropic's Claude Code](https://www.anthropic.com/claude-code)

### Настройка

*Скоро в магазине плагинов сообщества Obsidian*

1. **Проверьте доступ к CLI**: Убедитесь, что можете запустить `claude` в терминале
2. **Скачайте**: Получите последнюю версию (`obsidian-note-sage.zip`) со [страницы релизов](../../releases)
3. **Установите**: Распакуйте и поместите папку в `[ваше_хранилище]/.obsidian/plugins/obsidian-note-sage`
4. **Активируйте**: Включите плагин в настройках плагинов сообщества Obsidian
5. **Начните общение**: Используйте панель Note Sage на правой боковой панели

> [!WARNING]
> **Уведомление о предварительной версии**
>
> Этот плагин находится в активной разработке и будет изменять файлы в вашем хранилище. В настоящее время используются повышенные разрешения (`--permission-mode bypassPermissions` и `dangerously-skip-permissions`) для полной функциональности.
>
> **Рекомендуется**: Сделайте резервную копию хранилища перед использованием. Детальный контроль разрешений запланирован для будущих версий.

## Использование

### Базовое использование

1. Нажмите на иконку Note Sage на правой боковой панели
2. Введите сообщение в поле ввода чата
3. Нажмите Enter для отправки (Shift+Enter для новой строки)
4. Используйте кнопку «Текущая страница» для включения/исключения контекста текущей заметки

### Быстрые действия

Используйте кнопки быстрых действий над полем ввода чата для быстрого выполнения типичных задач:

- **Резюме**: Кратко резюмировать текущий документ
- **Улучшение**: Улучшить стиль написания и исправить ошибки
- **Анализ**: Проанализировать документ и предоставить выводы
- **Перевод**: Перевести между языками

Вы можете настроить промпт каждой кнопки в настройках.

## Настройки

### Базовые настройки

| Настройка | Описание |
|-----------|----------|
| Модель | Выберите модель Claude (opus-4-5, sonnet-4-5, haiku-4-5) |
| Язык | Язык интерфейса (Авто или выбрать из 11 языков) |

### Файловый контекст

| Настройка | Описание |
|-----------|----------|
| Включить содержимое файла | Включить содержимое текущего файла в контекст |
| Предпочитать выделенный текст | Включать только выделение вместо всего файла при выделенном тексте |
| Максимальная длина содержимого | Максимум символов для включения из файла (для экономии токенов) |

### Быстрые действия

Настройте промпт для каждой кнопки быстрого действия в настройках. Оставьте пустым для использования значений по умолчанию.

### MCP-серверы

Подключите MCP-серверы (Model Context Protocol) для расширения возможностей AI-агента.

| Настройка | Описание |
|-----------|----------|
| Добавить сервер | Подключить MCP-серверы типа stdio, SSE или HTTP |
| Включить/Отключить сервер | Переключить отдельные серверы |
| Панель инструментов | Просмотреть доступные инструменты подключенных MCP-серверов |

### Расширенные настройки

| Настройка | Описание |
|-----------|----------|
| API-ключ | API-ключ Anthropic (необязательно) |
| Путь к Claude CLI | Путь к исполняемому файлу claude (автоопределение если пусто) |
| Пользовательский системный промпт | Пользовательские инструкции для Claude |
| Режим отладки | Включить журналирование отладки для устранения неполадок |

## Устранение неполадок

### Проблемы с CLI

**Не можете найти Claude CLI?**

1. **Проверьте установку**: Запустите `claude --version` в терминале
2. **Ручная настройка**: Если автоопределение не работает, установите путь вручную в **Настройки > Плагины сообщества > Note Sage**

**Найти путь к исполняемому файлу:**
```bash
# Расположение Claude CLI
echo "$(sed -n 's/^exec "\([^"]*\)".*/\1/p' $(which claude))"
```

**Пользователи Windows**: Claude должен быть установлен в WSL. Нативная поддержка Windows всё ещё тестируется.

### Режим отладки

**Включить подробное журналирование:**
1. Перейдите в **Настройки > Плагины сообщества > Note Sage**
2. Включите «Режим отладки»
3. Откройте Консоль разработчика: `Cmd+Opt+I` (Mac) или `Ctrl+Shift+I` (Windows/Linux)

## Дорожная карта

### Завершённые функции
- [x] **Интеграция MCP-сервера** — Подключение внешних инструментов и ресурсов
- [x] **Многоязычная поддержка** — 11 языков с поддержкой RTL
- [x] **Настройка быстрых действий** — Настройки промптов для каждой кнопки
- [x] **Инструменты управления плагинами Obsidian** — Управление плагинами через AI

### Предстоящие функции
- [ ] **Режимы взаимодействия** — Режим написания, режим планирования и пользовательские рабочие процессы
- [ ] **Контроль разрешений** — Детальные разрешения на доступ и редактирование файлов
- [ ] **Кроссплатформенная поддержка** — Улучшенная совместимость с Windows/WSL
- [ ] **Интеграция контекстного меню** — «Добавить в контекст AI» из проводника файлов
- [ ] **Связывание файлов** — Открытие файлов, прочитанных/отредактированных моделью
- [ ] **Улучшенное копирование/вставка** — Умное копирование/вставка контекста

## Конфиденциальность и обработка данных

### Удалённые сервисы

Этот плагин использует **Anthropic Claude API** для обработки ваших запросов. При отправке сообщения:
- Текст вашего промпта отправляется на серверы Anthropic
- Если включён контекст «Текущая страница», содержимое файла также отправляется
- Данные обрабатываются в соответствии с [Политикой конфиденциальности Anthropic](https://www.anthropic.com/privacy)

### Требования к аккаунту

- **API-ключ Anthropic**: Необходим для доступа к API
  - Получите на [console.anthropic.com](https://console.anthropic.com)
  - Хранится локально в данных плагина вашего хранилища (не зашифрован)

### Доступ к файловой системе

Этот плагин обращается к расположениям вне вашего хранилища Obsidian:
- **Обнаружение Claude CLI**: Поиск по системным путям для нахождения исполняемого файла Claude
  - macOS/Linux: `~/.local/bin/`, `/usr/local/bin/`, `/opt/homebrew/bin/`
  - Windows: `%USERPROFILE%\AppData\`, `C:\Program Files\`
- **Разрешения агента**: Использует повышенные разрешения (`bypassPermissions`), позволяя AI читать/редактировать файлы в вашем хранилище

### Локальное хранение данных

- Сообщения чата хранятся только в памяти (очищаются при перезапуске)
- Настройки хранятся в `.obsidian/plugins/obsidian-note-sage/data.json`
- Разговоры можно вручную сохранить в хранилище как markdown-файлы

## Лицензия

MIT License
